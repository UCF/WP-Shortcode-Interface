var WPSCIF;!function(t){!function(t){var e=function(){function t(t){this.$field=t,this.fieldID=this.$field.attr("id"),this.required=this.$field.data("scif-required"),void 0===this.required&&(this.required=!1),this.param=this.$field.data("scif-param"),this.default=this.$field.data("scif-default")}return t.prototype.isValid=function(){var t="#"+this.fieldID+"-"+this.param+"-error";return this.required&&!this.getValue()?(jQuery(t).addClass("active"),!1):(jQuery(t).removeClass("active"),!0)},t.prototype.setDefaultValue=function(){this.default?this.$field.val(this.default):this.$field.val("")},t.prototype.hasValue=function(){return!!this.getValue()},t.prototype.getValue=function(){return this.$field.val()},t.prototype.getOutput=function(){return this.param+'="'+this.getValue()+'"'},t}();t.Field=e}(t.Fields||(t.Fields={}))}(WPSCIF||(WPSCIF={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),WPSCIF;!function(t){!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.inputMask=i.$field.data("wpscif-valid-regex"),i}return __extends(e,t),e.prototype.isValid=function(){t.prototype.isValid.call(this);return new RegExp(this.inputMask).test(this.getValue())},e}(t.Field);t.TextField=e}(t.Fields||(t.Fields={}))}(WPSCIF||(WPSCIF={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),WPSCIF;!function(t){!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.options=new Array,i.$field.find("option").each(function(t,e){i.options.push(jQuery(e).val())}),i}return __extends(e,t),e.prototype.setDefaultValue=function(){this.default?this.$field.val(this.default):jQuery.inArray("",this.options)>-1?this.$field.val(""):(this.$field.find("option:selected").prop("selected",!1),this.$field.find("option:first").prop("selected","selected"))},e}(t.Field);t.SelectField=e}(t.Fields||(t.Fields={}))}(WPSCIF||(WPSCIF={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),WPSCIF;!function(t){!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(t.Field);t.DateField=e}(t.Fields||(t.Fields={}))}(WPSCIF||(WPSCIF={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),WPSCIF;!function(t){!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(t.Field);t.ColorField=e}(t.Fields||(t.Fields={}))}(WPSCIF||(WPSCIF={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),WPSCIF;!function(t){!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.getValue=function(){return this.$field.is(":checked")},e.prototype.setDefaultValue=function(){null!==this.default?this.$field.prop("checked",!0):this.$field.prop("checked",!1)},e}(t.Field);t.CheckboxField=e}(t.Fields||(t.Fields={}))}(WPSCIF||(WPSCIF={}));var WPSCIF;!function(t){var e=function(){function t(){this.iframe=jQuery("#scif-preview-iframe").get(0),this.document=this.iframe.contentWindow||this.iframe.contentDocument,this.$container=jQuery("#scif-preview-window")}return t.prototype.write=function(t){var e=document.createElement("a");e.href=this.iframe.src;var i=this.parseSearch(e.search);i.shortcode=t,this.iframe.src=this.buildUrl(e,i)},t.prototype.parseSearch=function(t){var e=[],i=t.substring(1),n=i.split("&");for(var r in n){var o=n[r].split("=");e[o[0]]=o[1]}return e},t.prototype.buildSearch=function(t){var e=new Array;for(var i in t)e.push(i+"="+encodeURIComponent(t[i]));return"?"+e.join("&")},t.prototype.buildUrl=function(t,e){var i=t.protocol+"//";return i+=t.hostname,i+=t.pathname,i+=this.buildSearch(e)},t}();t.PreviewWindow=e}(WPSCIF||(WPSCIF={}));var WPSCIF;!function(t){var e=function(){function e(t){var e=this;this.command=t,this.$container=jQuery(".shortcode-editor.shortcode-"+t),this.$description=jQuery(".shortcode-desc.shortcode-"+this.command),this.allowContent=this.$container.is("[data-scif-allows-content]"),this.fields=new Array,this.$container.find(".wp-scif-field").each(function(t,i){jQuery(i),e.fields.push(e.createField(i))}),this.init()}return e.prototype.init=function(){this.fields.forEach(function(t){t.setDefaultValue()}),this.$container.addClass("active"),this.$description.addClass("active")},e.prototype.destroy=function(){this.$container.removeClass("active"),this.$description.removeClass("active")},e.prototype.createField=function(e){var i=jQuery(e),n=i.prop("tagName");if("SELECT"===n)return new t.Fields.SelectField(i);if("INPUT"===n){switch(i.attr("type")){case"text":return new t.Fields.TextField(i);case"date":return new t.Fields.DateField(i);case"checkbox":return new t.Fields.CheckboxField(i);default:return new t.Fields.TextField(i)}}},e.prototype.getFields=function(){return this.fields},e.prototype.isValid=function(){var t=0;return this.fields.forEach(function(e){e.isValid||t++}),!(t>0)},e.prototype.getValues=function(){var t=Array();return this.fields.forEach(function(e){e.hasValue()&&t.push(e.getOutput())}),t},e.prototype.buildShortcode=function(t){void 0===t&&(t="");var e="["+this.command,i=this.getValues();return i.length>0&&(e+=" "+i.join(" ")+"]"),t&&(e+=t),this.allowContent&&(e+="[/"+this.command+"]"),e},e}();t.FieldSet=e}(WPSCIF||(WPSCIF={}));var WPSCIF;!function(t){var e=function(){function e(){var e=this;this.$toggle=jQuery("#add-shortcode"),this.$interface=jQuery("#wp-scif-form-inner"),this.$submitBtn=this.$interface.find("#wp-scif-submit"),this.$select=this.$interface.find("#wp-scif-select"),this.activeFieldSet=null,this.editor=tinyMCE.activeEditor,this.preview=new t.PreviewWindow,this.$submitBtn.click(function(t){e.onSubmitBtnClick(t)}),this.$select.change(function(t){e.onSelectChanged(t)}),jQuery(".wp-scif-field").change(function(t){e.updatePreview()})}return e.prototype.buildShortcode=function(){var t=null;return this.editor&&(t=this.editor.selection.getContent()),this.activeFieldSet.buildShortcode(t)},e.prototype.insertShortcode=function(){var t=this.buildShortcode();send_to_editor(t)},e.prototype.onSubmitBtnClick=function(t){t.preventDefault(),this.activeFieldSet.isValid()&&this.insertShortcode()},e.prototype.onSelectChanged=function(e){this.activeFieldSet&&this.activeFieldSet.destroy();var i=this.$select.val();this.activeFieldSet=new t.FieldSet(i),this.updatePreview()},e.prototype.updatePreview=function(){var t=this.buildShortcode();this.preview.write(t)},e}();t.ShortcodeInterface=e}(WPSCIF||(WPSCIF={})),"undefined"!=typeof jQuery&&jQuery(document).ready(function(){var t;tinymce.on("addeditor",function(e){t||(t=new WPSCIF.ShortcodeInterface)})});
//# sourceMappingURL=wp-scif.min.js.map
